
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../parallelism/">
      
      
        <link rel="next" href="../cuda/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.48">
    
    
      
        <title>Cache-Aware Matrix Multiplication & GPU Performance Analysis - Andy's Notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cache-aware-matrix-multiplication-gpu-performance-analysis" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Andy&#39;s Notes" class="md-header__button md-logo" aria-label="Andy's Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Andy's Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Cache-Aware Matrix Multiplication & GPU Performance Analysis
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="orange"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Andy&#39;s Notes" class="md-nav__button md-logo" aria-label="Andy's Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Andy's Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Artificial Intelligence
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Artificial Intelligence
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Hardware
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Hardware
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory Hierarchy Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parallelism/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parallel Computing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Cache-Aware Matrix Multiplication & GPU Performance Analysis
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Cache-Aware Matrix Multiplication & GPU Performance Analysis
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-i-cpu-matrix-multiplication-with-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Part I: CPU – Matrix Multiplication with Cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part I: CPU – Matrix Multiplication with Cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-specifications" class="md-nav__link">
    <span class="md-ellipsis">
      System Specifications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matrix-multiplication-problem" class="md-nav__link">
    <span class="md-ellipsis">
      Matrix Multiplication Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questions-and-explanations" class="md-nav__link">
    <span class="md-ellipsis">
      Questions and Explanations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Questions and Explanations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#q1-what-is-the-dimension-of-the-matrix-c" class="md-nav__link">
    <span class="md-ellipsis">
      Q1. What is the dimension of the matrix \( C \)?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2-memory-constraints-maximum-l" class="md-nav__link">
    <span class="md-ellipsis">
      Q2. Memory Constraints &amp; Maximum \( l \)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3-dimensions-with-16-bit-integers" class="md-nav__link">
    <span class="md-ellipsis">
      Q3. Dimensions with 16-bit Integers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q4-total-memory-access-time" class="md-nav__link">
    <span class="md-ellipsis">
      Q4. Total Memory Access Time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q5-leveraging-cache-locality" class="md-nav__link">
    <span class="md-ellipsis">
      Q5. Leveraging Cache Locality
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q6-average-memory-access-time-random-access" class="md-nav__link">
    <span class="md-ellipsis">
      Q6. Average Memory Access Time (Random Access)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q7-conclusion-on-cache-usefulness" class="md-nav__link">
    <span class="md-ellipsis">
      Q7. Conclusion on Cache Usefulness
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-2-gpu-matrix-multiplication" class="md-nav__link">
    <span class="md-ellipsis">
      Part 2: GPU Matrix Multiplication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part 2: GPU Matrix Multiplication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#questions-and-explanations_1" class="md-nav__link">
    <span class="md-ellipsis">
      Questions and Explanations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Questions and Explanations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#q1-thread-requirement" class="md-nav__link">
    <span class="md-ellipsis">
      Q1. Thread Requirement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2-maximizing-gpu-resource-utilization" class="md-nav__link">
    <span class="md-ellipsis">
      Q2. Maximizing GPU Resource Utilization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3-minimum-dimension-for-square-matrix-c" class="md-nav__link">
    <span class="md-ellipsis">
      Q3. Minimum Dimension for Square Matrix \( C \)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q4-minimum-l1-cache-size-per-sm" class="md-nav__link">
    <span class="md-ellipsis">
      Q4. Minimum L1 Cache Size per SM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q5-delay-due-to-compulsory-cache-misses" class="md-nav__link">
    <span class="md-ellipsis">
      Q5. Delay Due to Compulsory Cache Misses
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cuda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CUDA C/C++
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Convolutional Neural Networks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Convolutional Neural Networks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../neural/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CNN Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1d_cnn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1-D CNN Examples
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jetson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nvidia's Jetson Nano
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai.pages.rospug.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROSPug
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Automotive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Automotive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Automotive/pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Automotive/pages/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Electrical/Electronic Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Automotive/pages/sensorsSignals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External Sensors and Signals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Protocols
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Protocols
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Protocols/pages/can/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAN
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Hardware
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Hardware
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Automotive/pages/pdm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Power Distribution Module
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cyber Security
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Cyber Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cybersecurity/pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Digital Systems Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Digital Systems Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../DSD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../DSD/verilog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verilog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../DSD/logicDesign/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logic Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../DSD/simulations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simulations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../DSD/applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Electronics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Electronics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../electronics/pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../electronics/pages/equipment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Measuring Equipment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../electronics/pages/protection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Electronic Protection Strategies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Electronic Components
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            Electronic Components
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../electronics/pages/transistor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transistors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../electronics/pages/opamp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operational Amplifiers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../electronics/pages/adc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Analog to Digital Converter
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Physics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Physics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Physics/pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Quanta and Fields
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Quanta and Fields
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Physics/pages/waveFunction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wave Function
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Physics/pages/measurement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Measurement
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Physics/pages/entanglement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Entanglement
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Physics/pages/fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Protocols and Interfaces
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Protocols and Interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Protocols/pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Protocols/pages/can/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAN
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Senior Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Senior Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../senior_design/pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Signals
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Signals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Signals/pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Signals/pages/introDsp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Digital Signal Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Signals/pages/spectrum/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FCC Electromagnetic Spectrum
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Software/pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Software/pages/developmentProcess/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software Development Flow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Software/pages/c/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C Programming Language
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-i-cpu-matrix-multiplication-with-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Part I: CPU – Matrix Multiplication with Cache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part I: CPU – Matrix Multiplication with Cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-specifications" class="md-nav__link">
    <span class="md-ellipsis">
      System Specifications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matrix-multiplication-problem" class="md-nav__link">
    <span class="md-ellipsis">
      Matrix Multiplication Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questions-and-explanations" class="md-nav__link">
    <span class="md-ellipsis">
      Questions and Explanations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Questions and Explanations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#q1-what-is-the-dimension-of-the-matrix-c" class="md-nav__link">
    <span class="md-ellipsis">
      Q1. What is the dimension of the matrix \( C \)?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2-memory-constraints-maximum-l" class="md-nav__link">
    <span class="md-ellipsis">
      Q2. Memory Constraints &amp; Maximum \( l \)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3-dimensions-with-16-bit-integers" class="md-nav__link">
    <span class="md-ellipsis">
      Q3. Dimensions with 16-bit Integers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q4-total-memory-access-time" class="md-nav__link">
    <span class="md-ellipsis">
      Q4. Total Memory Access Time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q5-leveraging-cache-locality" class="md-nav__link">
    <span class="md-ellipsis">
      Q5. Leveraging Cache Locality
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q6-average-memory-access-time-random-access" class="md-nav__link">
    <span class="md-ellipsis">
      Q6. Average Memory Access Time (Random Access)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q7-conclusion-on-cache-usefulness" class="md-nav__link">
    <span class="md-ellipsis">
      Q7. Conclusion on Cache Usefulness
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-2-gpu-matrix-multiplication" class="md-nav__link">
    <span class="md-ellipsis">
      Part 2: GPU Matrix Multiplication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part 2: GPU Matrix Multiplication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#questions-and-explanations_1" class="md-nav__link">
    <span class="md-ellipsis">
      Questions and Explanations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Questions and Explanations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#q1-thread-requirement" class="md-nav__link">
    <span class="md-ellipsis">
      Q1. Thread Requirement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2-maximizing-gpu-resource-utilization" class="md-nav__link">
    <span class="md-ellipsis">
      Q2. Maximizing GPU Resource Utilization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3-minimum-dimension-for-square-matrix-c" class="md-nav__link">
    <span class="md-ellipsis">
      Q3. Minimum Dimension for Square Matrix \( C \)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q4-minimum-l1-cache-size-per-sm" class="md-nav__link">
    <span class="md-ellipsis">
      Q4. Minimum L1 Cache Size per SM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q5-delay-due-to-compulsory-cache-misses" class="md-nav__link">
    <span class="md-ellipsis">
      Q5. Delay Due to Compulsory Cache Misses
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="cache-aware-matrix-multiplication-gpu-performance-analysis">Cache-Aware Matrix Multiplication &amp; GPU Performance Analysis</h1>
<p>This document explains a set of homework problems that analyze matrix multiplication performance in two scenarios: one on a CPU with a cache and one on a GPU. It includes both the problem statements and detailed reasoning behind each answer.</p>
<h2 id="overview">Overview</h2>
<p>The homework explores:</p>
<ul>
<li><strong>CPU-side matrix multiplication</strong> with memory and cache constraints.</li>
<li><strong>GPU-based matrix multiplication</strong> with thread and cache considerations.</li>
</ul>
<p>The problems examine how data layout, cache locality, and architectural parameters affect performance.</p>
<h2 id="part-i-cpu-matrix-multiplication-with-cache">Part I: CPU – Matrix Multiplication with Cache</h2>
<div class="highlight"><pre><span></span><code>You experiment with a computer having a one-level data cache (128 Bytes) and a main memory 
(1K Bytes). You exclusively focus on data accesses instead of instruction access. The latencies (in 
CPU cycles) of the different kinds of accesses are as follows:  
Cache hit: 1 cycle; Cache miss: 110 cycles; Main memory access with cache disabled: 80 cycles; 
Now, considering the following matrix multiplication C=A×B, please answer the following questions 
(please show detailed steps)
</code></pre></div>
<h3 id="system-specifications">System Specifications</h3>
<ul>
<li><strong>Cache:</strong> One-level data cache with 128 Bytes.</li>
<li><strong>Main Memory:</strong> 1K Bytes.</li>
<li><strong>Focus:</strong> Data accesses (instruction accesses are ignored).</li>
<li><strong>Access Latencies:</strong></li>
<li>Cache hit: <strong>1 cycle</strong></li>
<li>Cache miss: <strong>110 cycles</strong></li>
<li>Main memory access (with cache disabled): <strong>80 cycles</strong></li>
</ul>
<h3 id="matrix-multiplication-problem">Matrix Multiplication Problem</h3>
<p>Given matrices:</p>
<p><strong>Matrix A:</strong></p>
<div class="arithmatex">\[
A = \begin{bmatrix}
x_{0,0} &amp; x_{0,1} &amp; \cdots &amp; x_{0,l} \\
\vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
x_{m,0} &amp; x_{m,1} &amp; \cdots &amp; x_{m,l}
\end{bmatrix}
\]</div>
<p><strong>Matrix B:</strong></p>
<div class="arithmatex">\[
B = \begin{bmatrix}
y_{0,0} &amp; y_{0,1} &amp; \cdots &amp; y_{0,n} \\
\vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
y_{l,0} &amp; y_{l,1} &amp; \cdots &amp; y_{l,n}
\end{bmatrix}
\]</div>
<p>The product is given by:</p>
<div class="arithmatex">\[
C = A \times B.
\]</div>
<h3 id="questions-and-explanations">Questions and Explanations</h3>
<h4 id="q1-what-is-the-dimension-of-the-matrix-c">Q1. What is the dimension of the matrix <span class="arithmatex">\( C \)</span>?</h4>
<ul>
<li><strong>Explanation:</strong><br />
  Since <span class="arithmatex">\( A \)</span> is <span class="arithmatex">\((m+1) \times (l+1)\)</span> and <span class="arithmatex">\( B \)</span> is <span class="arithmatex">\((l+1) \times (n+1)\)</span>, the resulting matrix <span class="arithmatex">\( C \)</span> has dimensions:
  <span class="arithmatex">\( (m+1) \times (n+1) \)</span>.</li>
</ul>
<hr />
<h4 id="q2-memory-constraints-maximum-l">Q2. Memory Constraints &amp; Maximum <span class="arithmatex">\( l \)</span></h4>
<div class="highlight"><pre><span></span><code>Raw question: For multiplication using ALU, assume you pre-load both A and B into the main memory 
from the storage and reserve space for C in the main memory to speed up the performance. 
If pre-loading A and B takes 50% of the main memory space and reserved space for C takes 12.5% of 
the main memory. All elements in A, B, and C have the same bitwidth. Assuming we know the 
value of m and (m+n) is a constant, then what is the maximum value of l?
Answer: l = 2(m+1) - 1 = 2m + 1.
</code></pre></div>
<ul>
<li>
<p><strong>Problem Setup:</strong> </p>
<ul>
<li>Pre-loading <span class="arithmatex">\( A \)</span> and <span class="arithmatex">\( B \)</span> into main memory uses <strong>50%</strong> of the memory.</li>
<li>Reserving space for <span class="arithmatex">\( C \)</span> uses <strong>12.5%</strong> of the memory.</li>
<li>All elements in <span class="arithmatex">\( A \)</span>, <span class="arithmatex">\( B \)</span>, and <span class="arithmatex">\( C \)</span> have the same bitwidth.</li>
<li>Assume <span class="arithmatex">\( m+n \)</span> is constant.</li>
</ul>
</li>
<li>
<p><strong>Explanation:</strong></p>
</li>
</ul>
<p>Since pre-loading A and B uses 50% of the memory while reserving space for <span class="arithmatex">\( C \)</span> uses 12.5%, the ratio of memory allocated for (A+B) to <span class="arithmatex">\( C \)</span> is 50:12.5, or 4:1. This means the total number of elements in A and B is four times the number of elements in <span class="arithmatex">\( C \)</span>. Given that every element has the same size:</p>
<ul>
<li>Matrix A has <span class="arithmatex">\((m+1)(l+1)\)</span> elements.</li>
<li>Matrix B has <span class="arithmatex">\((l+1)(n+1)\)</span> elements.</li>
<li>Matrix <span class="arithmatex">\( C \)</span> has <span class="arithmatex">\((m+1)(n+1)\)</span> elements.</li>
</ul>
<p>So, the relationship becomes:</p>
<p>$$
  (m+1)(l+1) + (l+1)(n+1) = 4\,(m+1)(n+1).
  $$</p>
<p>Notice that both terms on the left share the factor <span class="arithmatex">\((l+1)\)</span>, so we can factor it out:</p>
<p>$$
  (l+1)\Big[(m+1) + (n+1)\Big] = (l+1)(m+n+2).
  $$</p>
<p>Using a calculator to solve for <span class="arithmatex">\( l+1 \)</span>, we get:</p>
<p>$$
  l+1 = \frac{4\,(m+1)(n+1)}{m+n+2}.
  $$</p>
<p>Since we assume <span class="arithmatex">\( m+n \)</span> is constant and we're looking to maximize <span class="arithmatex">\( l \)</span>, the product <span class="arithmatex">\((m+1)(n+1)\)</span> is maximized when <span class="arithmatex">\( m = n \)</span>. Setting <span class="arithmatex">\( m = n \)</span> simplifies the expression (because <span class="arithmatex">\( m+n+2 \)</span> becomes <span class="arithmatex">\( 2(m+1) \)</span>), and we eventually find that:</p>
<p>$$
  l+1 = 2(m+1),
  $$
  which means:
  $$
  l = 2(m+1) - 1 = 2m+1.
  $$</p>
<hr />
<h4 id="q3-dimensions-with-16-bit-integers">Q3. Dimensions with 16-bit Integers</h4>
<div class="highlight"><pre><span></span><code>Raw question: Following the result from 2), If x is a 16-bit integer, what are the dimensions of A, B, and C?
Answer: (m=n=7; l=15)
</code></pre></div>
<p><strong>Explanation:</strong></p>
<ul>
<li>The problem states that 12.5% of the 1K bytes is reserved for matrix <span class="arithmatex">\( C \)</span>. Since each 16‑bit element is 2 bytes, <span class="arithmatex">\( C \)</span> gets <span class="arithmatex">\(128 \div 2 = 64\)</span> elements.</li>
<li>If <span class="arithmatex">\( C \)</span> is square (which is optimal when <span class="arithmatex">\( m \)</span> and <span class="arithmatex">\( n \)</span> are equal), then:</li>
</ul>
<p>$$
  (m+1)(n+1) = 64.
  $$</p>
<p>The simplest square factorization is <span class="arithmatex">\(8 \times 8\)</span>, so <span class="arithmatex">\( m+1 = 8 \)</span> and <span class="arithmatex">\( n+1 = 8 \)</span>, which gives <span class="arithmatex">\( m = n = 7 \)</span>.</p>
<ul>
<li>From Q2, we derived that <span class="arithmatex">\( l = 2(m+1) - 1 \)</span>. Plugging <span class="arithmatex">\( m = 7 \)</span> into this gives:</li>
</ul>
<p>$$
  l = 2 \times 8 - 1 = 16 - 1 = 15.
  $$</p>
<p>Thus, we have:</p>
<ul>
<li><strong>m = n = 7</strong></li>
<li><strong>l = 15</strong></li>
</ul>
<p>This means:</p>
<ul>
<li>Matrix A is <span class="arithmatex">\(8 \times 16\)</span>,</li>
<li>Matrix B is <span class="arithmatex">\(16 \times 8\)</span>,</li>
<li>Matrix C is <span class="arithmatex">\(8 \times 8\)</span>.</li>
</ul>
<hr />
<h4 id="q4-total-memory-access-time">Q4. Total Memory Access Time</h4>
<div class="highlight"><pre><span></span><code>Raw question: Following the result from 3), assume that the cache is a fully associative cache with 
the least recently used (LRU) replacement policy and the result can be directly written back to the main memory 
without sacrificing the memory read. What is the total memory access time (total cycles) for the matrix multiplication 
if we strictly follow the instructions below? Assume that we are using a 32B cache line.

for (int i=0; i&lt;=m; i++)
{
    for (int j=0; j&lt;=n; j++)
    {
         C(i,j) = A(i,:) * BT(:,j)
    }
}
Answer: Assume 32B cache line: 8×(1(A) + 8×8(B)) = 65×8 = 520 misses.
</code></pre></div>
<p><strong>Explanation:</strong></p>
<p>For our matrix multiplication (with <span class="arithmatex">\( m=7 \)</span>, so 8 rows):</p>
<ul>
<li>
<p><strong>Matrix A:</strong><br />
  Each row of <span class="arithmatex">\( A \)</span> has 16 elements. Since each element is 2 bytes, one row occupies <span class="arithmatex">\( 16 \times 2 = 32 \)</span> bytes, exactly one cache line.<br />
  → <strong>Result:</strong> Loading one row of <span class="arithmatex">\( A \)</span> causes 1 cache miss per row.</p>
</li>
<li>
<p><strong>Matrix B:</strong><br />
  In the inner loop, elements from <span class="arithmatex">\( B \)</span> (or its transposed version) are accessed in a less contiguous manner.<br />
  For each row of <span class="arithmatex">\( C \)</span>, the multiplication requires accessing an 8×8 block from <span class="arithmatex">\( B \)</span>.<br />
  In the worst-case scenario, each element of this block might be in a different cache line, which would yield 64 cache misses per row.</p>
</li>
<li>
<p><strong>Total for each row of <span class="arithmatex">\( C \)</span>:</strong><br />
  1 miss (for <span class="arithmatex">\( A \)</span>) + 64 misses (for <span class="arithmatex">\( B \)</span>) = 65 misses per row.</p>
</li>
<li>
<p>With 8 rows, the total number of cache misses is:</p>
</li>
</ul>
<p>$$
  65 \text{ misses/row} \times 8 \text{ rows} = 520 \text{ misses}.
  $$</p>
<hr />
<h4 id="q5-leveraging-cache-locality">Q5. Leveraging Cache Locality</h4>
<div class="highlight"><pre><span></span><code>Raw question: How can you modify the approach to leverage the locality of the data in cache for improvement? 
How much can you improve with your method? (Use Tiling, transpose, or other techniques as long as you can show the improvement.)
</code></pre></div>
<p><strong>Explanation:</strong></p>
<p><strong>Technique:</strong><br />
  Use <strong>tiling (blocking)</strong> and/or <strong>transpose</strong> <span class="arithmatex">\( B \)</span> to improve spatial and temporal locality.</p>
<p><strong>How it helps:</strong>  </p>
<ul>
<li><strong>Tiling/Blocking:</strong><br />
    Break the matrices into smaller sub-blocks that fit entirely in the cache. Once a sub-block is loaded, you can reuse the data multiple times for computations, significantly reducing cache misses.</li>
<li><strong>Transposing <span class="arithmatex">\( B \)</span>:</strong><br />
    This ensures that the memory accesses for <span class="arithmatex">\( B \)</span> are more contiguous, further reducing the number of cache misses.</li>
</ul>
<p><strong>Improvement:</strong><br />
  Depending on the chosen block size, such techniques can reduce cache misses by an order of magnitude, making the matrix multiplication much more efficient.</p>
<hr />
<h4 id="q6-average-memory-access-time-random-access">Q6. Average Memory Access Time (Random Access)</h4>
<div class="highlight"><pre><span></span><code>Raw question: After the computation, if we randomly access elements from A, B, and C continuously, what would the average memory access time (cycles per access) be?
(Hit rate = 128/(512+128) → 110×4/5 + 1/5 = 88.2 cycles)
</code></pre></div>
<p><strong>Explanation:</strong></p>
<ul>
<li>
<p><strong>Calculation of Hit Rate:</strong><br />
  The cache holds 128 Bytes out of a total of 512 + 128 = 640 Bytes that are being accessed.<br />
  So, the hit rate is <span class="arithmatex">\( 128/640 = 20\% \)</span> and the miss rate is <span class="arithmatex">\( 80\% \)</span>.</p>
</li>
<li>
<p><strong>Average Memory Access Time:</strong><br />
  With a hit taking 1 cycle and a miss taking 110 cycles, the average access time is:</p>
</li>
</ul>
<p>$$
  \text{Average} = 0.8 \times 110 + 0.2 \times 1 \approx 88.2 \text{ cycles}.
  $$</p>
<hr />
<h4 id="q7-conclusion-on-cache-usefulness">Q7. Conclusion on Cache Usefulness</h4>
<div class="highlight"><pre><span></span><code>Raw question: Based on the observation from Q6 and the memory access time given before, what can you conclude?
(88.2 &gt; 80 → cache is useless if there is no locality)
</code></pre></div>
<p><strong>Explanation:</strong> The average access time when randomly accessing memory (88.2 cycles) is higher than the 80 cycles required for a main memory access when the cache is disabled.</p>
<p><strong>Conclusion:</strong> Without proper data locality, the cache not only fails to provide benefits but may actually hurt performance. This shows that effective use of the cache (via locality improvements) is critical for performance gains.</p>
<hr />
<h2 id="part-2-gpu-matrix-multiplication">Part 2: GPU Matrix Multiplication</h2>
<p>In this section, we analyze matrix multiplication on a GPU. The problem assumes that all elements in matrices A, B, and C are 2-byte values. We use the following GPU characteristics to answer the questions:</p>
<ul>
<li><strong>Element Bitwidth:</strong> 2 Bytes.</li>
<li>
<p><strong>GPU Specifications:</strong></p>
<ul>
<li>2 Stream Multiprocessors (SM).</li>
<li>Each SM has 2 warp schedulers.</li>
<li>Each warp scheduler manages 4 warps.</li>
<li>Each warp contains 32 threads.</li>
</ul>
</li>
</ul>
<h3 id="questions-and-explanations_1">Questions and Explanations</h3>
<h4 id="q1-thread-requirement">Q1. Thread Requirement</h4>
<div class="highlight"><pre><span></span><code>Raw question: If you use one thread to compute each element in the matrix C, how many threads should you request in your program code?
Answer: (m+1)(n+1)
</code></pre></div>
<p><strong>Explanation:</strong><br />
Since each element of C is computed by a single thread, the total number of threads equals the number of elements in C, which is <span class="arithmatex">\((m+1)(n+1)\)</span>.</p>
<hr />
<h4 id="q2-maximizing-gpu-resource-utilization">Q2. Maximizing GPU Resource Utilization</h4>
<div class="highlight"><pre><span></span><code>Raw question: Assume that the GPU has 2 Stream Multiprocessors (SM), each SM has 2 warp schedulers, each warp scheduler is in charge of 4 warps, and each warp contains 32 threads. What are the possible dimensions of C that can maximize GPU resource utilization? Please provide at least four different dimensions.
Answer (professor’s interpretation): 2 × 2 × 32 = 128 → (i.e. 128×... threads)
</code></pre></div>
<p><strong>Explanation:</strong></p>
<p>Even though the GPU specifications mention that each warp scheduler manages 4 warps, in practice only one warp per scheduler is active at any given cycle. This means that each warp scheduler effectively handles only 32 threads concurrently.</p>
<p>Thus, the total number of threads that can be scheduled at the same time is:</p>
<div class="arithmatex">\[
2 \text{ SMs} \times 2 \text{ warp schedulers per SM} \times 32 \text{ threads per scheduler} = 128 \text{ threads.}
\]</div>
<p>To maximize GPU utilization, the total number of threads (i.e., the total elements in matrix C) should be a multiple of 128. For example, dimensions of C such that <span class="arithmatex">\((m+1)(n+1)\)</span> equals 128, 256, 384, etc., would be optimal.</p>
<hr />
<h4 id="q3-minimum-dimension-for-square-matrix-c">Q3. Minimum Dimension for Square Matrix <span class="arithmatex">\( C \)</span></h4>
<div class="highlight"><pre><span></span><code>Raw question: Following the settings in Q2, if m = n, what is the minimum dimension of C?
Answer: (m+1)(n+1) = 256 → m = n = 15.
</code></pre></div>
<p><strong>Explanation:</strong><br />
For a square matrix <span class="arithmatex">\( C \)</span>, the total number of elements is given by <span class="arithmatex">\((m+1)^2\)</span> (since there are <span class="arithmatex">\(m+1\)</span> rows and <span class="arithmatex">\(m+1\)</span> columns). To align with a convenient GPU thread count, we want the number of elements to be 256. Setting up the equation:</p>
<div class="arithmatex">\[
(m+1)^2 = 256,
\]</div>
<p>we take the square root of both sides to obtain:</p>
<div class="arithmatex">\[
m+1 = 16.
\]</div>
<p>This immediately gives:</p>
<div class="arithmatex">\[
m = 15.
\]</div>
<p>Since <span class="arithmatex">\( m = n \)</span> for a square matrix, we also have <span class="arithmatex">\( n = 15 \)</span>. Thus, matrix <span class="arithmatex">\( C \)</span> is <span class="arithmatex">\( 16 \times 16 \)</span> (since <span class="arithmatex">\(m+1 = 16\)</span> and <span class="arithmatex">\(n+1 = 16\)</span>), which provides exactly 256 elements, matching the desired GPU thread count.</p>
<hr />
<h4 id="q4-minimum-l1-cache-size-per-sm">Q4. Minimum L1 Cache Size per SM</h4>
<div class="highlight"><pre><span></span><code>Raw question: Following the result from Q3, assume that each SM has its own L1 and L2 caches and the L2 cache is large enough to preload all necessary data. Let’s further assume that m = n = l. If each L1 cache only allows up to 80% of its space for data buffering, what is the minimum size of L1 that can accommodate all necessary data for each warp operation without causing any runtime L1 cache miss? (Hint: Consider both inputs and outputs.)
Answer: 960 Bytes.
</code></pre></div>
<p><strong>Explanation:</strong></p>
<p>For each warp operation, the algorithm must have the necessary data buffered in the cache. Here’s how we determine the numbers:</p>
<ol>
<li>
<p><strong>Matrix C:</strong><br />
   A warp consists of 32 threads, and each thread computes one output element of matrix <span class="arithmatex">\( C \)</span>. To support both reading and writing (or double-buffering) for <span class="arithmatex">\( C \)</span>, we need space for:
   $$
   2 \times 32 = 64 \text{ elements}.
   $$</p>
</li>
<li>
<p><strong>Matrix A:</strong><br />
   Similarly, each thread uses one element from matrix <span class="arithmatex">\( A \)</span> as an input. Doubling this for buffering gives:
   $$
   2 \times 32 = 64 \text{ elements}.
   $$</p>
</li>
<li>
<p><strong>Matrix B:</strong><br />
   The tiling strategy for matrix <span class="arithmatex">\( B \)</span> requires a block of data sized <span class="arithmatex">\( 16 \times 16 \)</span> (from the square matrix assumption when <span class="arithmatex">\( m = n = l \)</span>), which equals:
   $$
   256 \text{ elements}.
   $$</p>
</li>
</ol>
<p>Adding these together, the total number of elements that must be buffered for one warp operation is:</p>
<div class="arithmatex">\[
64 \text{ (for \( C \))} + 64 \text{ (for \( A \))} + 256 \text{ (for \( B \))} = 384 \text{ elements}.
\]</div>
<p>Since each element is 2 bytes, the total data size is:
$$
384 \times 2 = 768 \text{ bytes}.
$$</p>
<p>However, only 80% of the L1 cache is available for data buffering. To ensure that 768 bytes fit into just 80% of the cache, we need the L1 cache to be at least:
$$
\frac{768 \text{ bytes}}{0.8} = 960 \text{ bytes}.
$$</p>
<p>Thus, the minimum L1 cache size required for each warp operation is 960 bytes.</p>
<hr />
<h4 id="q5-delay-due-to-compulsory-cache-misses">Q5. Delay Due to Compulsory Cache Misses</h4>
<p><div class="highlight"><pre><span></span><code>Raw question: Following the result from Q4, assume the cache has four ports that can concurrently support four data transfers between L2 and L1. The cache line is 32B and an L1 cache miss takes 20 cycles. What is the delay of compulsory misses for the matrix multiplication C = A×B?
Answer: For (m+1)(n+1) = 256, the compulsory miss with a single port is estimated as:
16×16 (matrix dimension) × (2B/32B) × (1 (for B) + ½ (for A) + ½ (for C)) × 20 cycles = 640 cycles. With four ports, the delay is 640/4 = 160 cycles.
</code></pre></div>
<strong>Explanation:</strong></p>
<ol>
<li>
<p><strong>Matrix Dimension:</strong><br />
   With <span class="arithmatex">\((m+1)(n+1)=256\)</span>, matrix <span class="arithmatex">\(C\)</span> is <span class="arithmatex">\(16 \times 16\)</span>.</p>
</li>
<li>
<p><strong>Cache Line Usage:</strong><br />
   Each element is 2 bytes and each cache line is 32 bytes, so one cache line holds <span class="arithmatex">\(32/2=16\)</span> elements.<br />
   Therefore, the fraction of a cache line used per element is <span class="arithmatex">\(\frac{2 \text{ B}}{32 \text{ B}}\)</span>.</p>
</li>
<li>
<p><strong>Weighted Data Requirements:</strong>  </p>
<p>For matrix <span class="arithmatex">\(B\)</span>, every element is loaded fresh (weight 1).  </p>
<p>For matrices <span class="arithmatex">\(A\)</span> and <span class="arithmatex">\(C\)</span>, only about half of the required data is loaded on a compulsory miss (weight <span class="arithmatex">\(1/2\)</span> each).<br />
Thus, the combined weight is:  </p>
<div class="arithmatex">\[
1 \;(\text{for } B) + \frac{1}{2} \;(\text{for } A) + \frac{1}{2} \;(\text{for } C) = 2.
\]</div>
</li>
<li>
<p><strong>Calculating Misses:</strong><br />
   Multiply the total number of elements in <span class="arithmatex">\(C\)</span> (which is <span class="arithmatex">\(16 \times 16\)</span>) by the fraction of a cache line per element and then by the weight:
   $$
   16 \times 16 \times \left(\frac{2 \text{ B}}{32 \text{ B}}\right) \times 2.
   $$
   Here, <span class="arithmatex">\(16 \times 16 = 256\)</span> elements, and <span class="arithmatex">\(\frac{2}{32} = \frac{1}{16}\)</span>, so:
   $$
   256 \times \frac{1}{16} \times 2 = 16 \times 2 = 32 \text{ cache line misses}.
   $$</p>
</li>
<li>
<p><strong>Cycle Delay:</strong><br />
   Each cache miss costs 20 cycles, so with one port, the delay is:
   $$
   32 \times 20 = 640 \text{ cycles}.
   $$</p>
</li>
<li>
<p><strong>Parallel Cache Ports:</strong><br />
   With 4 cache ports working concurrently, the delay is divided by 4:
   $$
   \frac{640}{4} = 160 \text{ cycles}.
   $$</p>
</li>
</ol>
<p>Thus, the delay due to compulsory cache misses is 160 cycles.</p>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["mermaid"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>